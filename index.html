<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Психологический тест</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <h1>Психологический тест</h1>

    <div id="quiz">
        <div class="question" id="question">Как вы начинаете утро?</div>
        <div class="answers">
            <button aria-label="Ответ 1">Ответ 1</button>
            <button aria-label="Ответ 2">Ответ 2</button>
            <button aria-label="Ответ 3">Ответ 3</button>
        </div>
    </div>

    <!-- Этот блок скрывается вначале -->
    <div id="result" class="hidden">
        <p id="result-text">Чтобы узнать ответ, отправьте 10 друзьям!</p>
        <button onclick="shareOnWhatsApp()">Поделиться в WhatsApp</button>
        <button id="show-answer-btn" class="hidden" onclick="displayFinalResult()">Узнать результат</button>
    </div>

    <!-- Блок с финальным результатом -->
    <div id="final-result" class="hidden">
        <p id="final-result-text"></p>
    </div>

    <!-- Этот блок появляется через 20 секунд -->
    <div id="share-message" class="hidden">
        Чтобы узнать ответ, отправьте 10 друзьям
        <button id="share-button">Поделиться</button>
    </div>

    <!-- Кнопка Telegram для финала -->
    <div id="telegram-button" class="hidden">
        <button onclick="redirectToTelegram()">Перейти в наш Telegram-канал</button>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function() {

            function shareOnWhatsApp() {
                const messageText = "Пройди интересный психологический тест, и узнай какой ты человек! https://example.com";
                const whatsappURL = `https://wa.me/?text=${encodeURIComponent(messageText)}`;
                window.open(whatsappURL, "_blank");

                // Запуск таймера на 20 секунд
                setTimeout(() => {
                    console.log('Показываю кнопку "Поделиться"');
                    document.getElementById("share-message").classList.remove("hidden");
                }, 20000);
            }

            function displayFinalResult() {
                const finalResult = document.getElementById("final-result");
                const telegramButton = document.getElementById("telegram-button");

                // Текст финального результата
                let resultText;
                const score = calculateScore();

                if (score >= 12) {
                    resultText = "Ты активный человек!";
                } else if (score >= 6) {
                    resultText = "Ты спокойный человек.";
                } else {
                    resultText = "Ты немного стрессовый человек.";
                }

                document.getElementById("final-result-text").textContent = resultText;

                // Показываем финальный результат и кнопку Telegram
                finalResult.classList.remove("hidden");
                telegramButton.classList.remove("hidden");

                // Скрыть кнопку "Узнать результат"
                document.getElementById("show-answer-btn").classList.add("hidden");
            }

            function calculateScore() {
                const answers = document.querySelectorAll(".answers button");
                let score = 0;

                answers.forEach(button => {
                    button.addEventListener("click", function() {
                        switch (button.textContent) {
                            case 'Ответ 1':
                                score += 2;
                                break;
                            case 'Ответ 2':
                                score += 1;
                                break;
                            case 'Ответ 3':
                                score += 0;
                                break;
                        }
                    });
                });

                return score;
            }

            // Подключаем обработчики
            const shareButton = document.getElementById("share-button");
            shareButton.addEventListener("click", shareOnWhatsApp);

        });

        function redirectToTelegram() {
            window.location.href = "https://t.me/your_channel_link";
        }

    </script>
</body>
</html>
